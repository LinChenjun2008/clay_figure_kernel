include win_tools_def.txt

# include linux_tools_def.txt

BOOTLOADER_FLAGS := -Wall -Wextra -I$(BOOTLOADER_INCLUDE_PATH) -I$(SRC_PATH) -I$(BOOTLOADER_SRC_PATH) \
 -std=c99 \
 -e UefiMain -nostdinc -nostdlib \
 -finput-charset=UTF-8 -fexec-charset=UTF-8 -fno-stack-protector -O0 \
 -fno-builtin -Wl,--subsystem,10 -m64 -mcmodel=large -fpic

KERNEL_FLAGS     := -I$(KERNEL_ARCH_INCLUDE_PATH) -I$(SRC_PATH) -I$(KERNEL_INCLUDE_PATH) \
 -Wall -Wextra -Werror \
 -nostdlib -nostdinc \
 -finput-charset=UTF-8 -fexec-charset=UTF-8 \
 -fno-builtin -fno-strict-aliasing -ffreestanding \
 -fstrength-reduce -falign-loops -falign-jumps \
 -fno-pic -fwrapv\
 -mno-red-zone -m64 -mcmodel=large -march=x86-64 \
 -O0 \
 -g3 -gdwarf-2 -gstrict-dwarf

QEMU_FLAGS := -m 128M -bios $(OVMF) \
 -smp $(SMP_CORES),cores=$(SMP_CORES),threads=1,sockets=1 \
 -drive file=fat:rw:$(ESP_PATH),index=0,format=vvfat -net none \
 -usb \
 -device nec-usb-xhci,id=xhci \
 -device usb-kbd \
 -device usb-mouse \
 -no-shutdown \
 -monitor stdio \

# -device qemu-xhci,id=xhci
# -d cpu_reset

# -chardev stdio,mux=on,id=com1 \
 -serial chardev:com1 \